{% extends "base_request.xml" %}

{% block body %}
<m:FindItem Traversal="Shallow">
    <m:ItemShape>
        <t:BaseShape>IdOnly</t:BaseShape>
        <t:AdditionalProperties>
            <t:FieldURI FieldURI="calendar:Start"/>
            <t:FieldURI FieldURI="calendar:End"/>
            <t:FieldURI FieldURI="item:Subject"/>
            <t:FieldURI FieldURI="calendar:RecurrenceId"/>
        </t:AdditionalProperties>
    </m:ItemShape>

    <m:IndexedPageItemView
        MaxEntriesReturned="{{ batch_size }}"
        Offset="{{ offset }}"
        BasePoint="Beginning" />

    <m:ParentFolderIds>
        <t:FolderId Id="{{ folder_id }} " />
    </m:ParentFolderIds>
    {% if odoo_events_only and start_date %}
    <m:QueryString>System.Category:'Odoo' AND Start:{{ start_date }}</m:QueryString>
    {% end %}
    {% if odoo_events_only and end_date %}
    <m:QueryString>System.Category:'Odoo' AND End:{{ end_date }}</m:QueryString>
    {% end %}
</m:FindItem>
{% end %}